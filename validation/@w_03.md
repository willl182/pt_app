# Week 03 Audit – Advanced Calculation Inputs

## Inputs Reviewed
- Homogeneity dataset (`homogeneity.csv`).
- Stability dataset (`stability.csv`).
- Algorithm A input dataset (`input_alg_a.csv`).
- Automation helper: `validation/scripts/validate_week_03.R`. 【F:validation/scripts/validate_week_03.R†L1-L83】

## Step-by-Step Audit Trail
1. **Range Verification** – Homogeneity and Algorithm A datasets share identical value ranges (min ≈ −0.140, max ≈ 182.560, mean ≈ 65.984), confirming that the algorithm consumes unmodified homogeneity inputs. Stability values fall within the same envelope (min ≈ −0.066, max ≈ 182.522). 【196b6c†L24-L42】
2. **Replicate Structure Review** – Each dataset exposes replicates `{1, 2}`, matching the experimental design described in ISO 13528 Annex B and ensuring comparability across assessments. 【196b6c†L24-L42】
3. **Cross-Dataset Merge** – The week 03 script merges `homogeneity.csv` and `input_alg_a.csv` across `pollutant`, `level`, `replicate`, and `sample_id`. Any non-zero delta triggers warnings; current baselines show zero differences, validating data hand-off integrity. 【F:validation/scripts/validate_week_03.R†L45-L71】
4. **Stability Envelope by Pollutant** – Aggregated min/max by pollutant-level pairs to highlight drift detection targets. This summary should be archived alongside future stability campaigns to spot anomalous trends quickly. 【F:validation/scripts/validate_week_03.R†L73-L78】
5. **Exception Handling** – The script raises explicit errors for missing files and unexpected replicate IDs, ensuring future maintenance introduces deliberate updates rather than silent divergence. 【F:validation/scripts/validate_week_03.R†L15-L43】

## Findings
- **Input Parity Achieved** – Homogeneity inputs and Algorithm A sources remain in lockstep, eliminating the risk of parallel-but-divergent datasets.
- **Controlled Stability Behaviour** – Current stability values sit within the same magnitude as homogeneity, suggesting no immediate concerns with sample degradation.
- **Solid Guardrails** – Automated comparison logic provides high-sensitivity detection for accidental edits to the advanced calculation inputs.

## Recommendations & Follow-Up
- Extend the merge logic to include checksum comparisons if files grow beyond current sizes.
- Capture the stability min/max table per release to establish a historical drift chart.
- Coordinate with the PT analysis module owners to surface the script outputs in CI pipelines before publishing statistical reports.
