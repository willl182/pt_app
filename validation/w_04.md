# **Protocolo de Auditoría Detallado: Semana 4**

Fecha de Auditoría: 21 de octubre de 2025  
Auditor: Pt calaire (Project Manager)  
Módulo Auditado: Indicadores de Desempeño y Generación de Informes en app.R

### **1\. Actividades del Cronograma a Evaluar**

* "Implementación de indicadores de desempeño (z, z', ζ, En)." \[cite: 20251020 Propuesta Desarrollo\]  
* "Plantilla de informe." \[cite: 20251020 Propuesta Desarrollo\]

### **2\. Objetivo de la Auditoría**

Verificar que los cálculos de los puntajes de desempeño (z, z', ζ, En) son matemáticamente correctos y que el mecanismo técnico para generar y descargar informes es funcional, sentando las bases para la creación de la plantilla de contenido final.

### **3\. Criterios de Éxito y Evidencia**

| Criterio de Éxito | Evidencia Clave a Revisar en app.R | Estado Esperado |
| :---- | :---- | :---- |
| **1\. Correctitud del Cálculo de Puntajes de Desempeño** | La lógica reactiva scores\_run (app.R:1004-1132) que calcula los cuatro indicadores. | Los valores calculados para z\_score, z\_prime\_score, zeta\_score y En\_score deben coincidir exactamente con un conjunto de datos de validación pre-calculado. |
| **2\. Uso Correcto de Parámetros de Entrada** | Las variables usadas en los cálculos de puntajes (ej. x\_pt, sigma\_pt, u\_lab, u\_ref). | La aplicación debe utilizar correctamente el valor asignado, la desviación estándar para la evaluación de la aptitud y las incertidumbres del laboratorio y de referencia en las fórmulas correspondientes. |
| **3\. Funcionalidad del Módulo de Informes** | El downloadHandler en el servidor y el downloadButton en la UI, como se describe en la auditoría de gpt\_eval.md. | Al hacer clic en el botón de descarga, el navegador debe iniciar la descarga de un archivo (HTML, PDF o DOCX) sin errores en la aplicación. |
| **4\. Transferencia de Datos al Informe** | El llamado a rmarkdown::render dentro del downloadHandler, específicamente el argumento params. | Los datos y resultados generados en la sesión del usuario (ej. la tabla de puntajes) deben pasarse correctamente al motor de R Markdown para su inclusión en el informe. |
| **5\. Manejo de Entradas Incompletas para Puntajes** | Lógica que gestiona la ausencia de incertidumbres (u\_lab, u\_ref), necesarias para los puntajes ζ y En. | Si las incertidumbres no están disponibles, los puntajes ζ y En no deben calcularse o deben mostrarse como NA. La aplicación debe notificar al usuario en lugar de fallar. |

### **4\. Plan de Pruebas (Casos de Uso)**

| ID Prueba | Tipo | Pasos a Ejecutar | Resultado Esperado |
| :---- | :---- | :---- | :---- |
| **T4.1** | **Validación (Puntajes de Desempeño)** | 1\. Cargar un conjunto de datos (scores\_valid.csv) con todos los valores de entrada (resultado, incertidumbres, etc.) y con los cuatro puntajes pre-calculados y validados externamente. 2\. Ejecutar el módulo "PT Scores" en app.R. 3\. Comparar los resultados de la tabla en la app con los valores de validación. | Los cuatro puntajes calculados por la aplicación deben ser idénticos a los del archivo de validación. |
| **T4.2** | **Funcional (Descarga de Informe)** | 1\. Ejecutar cualquier análisis en la aplicación para generar resultados. 2\. Navegar al módulo "Generate Report". 3\. Hacer clic en los botones para descargar el informe en formato HTML, PDF y DOCX. | El navegador debe descargar un archivo para cada formato. El contenido del archivo puede ser una plantilla básica, pero la descarga debe ser exitosa. |
| **T4.3** | **Edge Case (Incertidumbre Faltante)** | 1\. Cargar un conjunto de datos donde la columna de incertidumbre del laboratorio (u\_lab) esté vacía para algunos participantes. 2\. Ejecutar el módulo "PT Scores". | Para los participantes sin u\_lab, los puntajes zeta\_score y En\_score deben aparecer como NA o no calcularse. Los puntajes z\_score y z\_prime\_score deben calcularse correctamente. La app no debe fallar. |
| **T4.4** | **Fallo (Plantilla Rmd Ausente)** | 1\. Renombrar temporalmente el archivo de plantilla .Rmd al que apunta la aplicación. 2\. Intentar descargar un informe. | La aplicación no debe colapsar (crash). Debe manejar la excepción y mostrar un mensaje de error controlado al usuario, como "Error: no se encontró la plantilla del informe." |

### **5\. Herramientas Requeridas**

* Entorno de desarrollo R (ej. RStudio).  
* El script app.R y el archivo de plantilla .Rmd asociado.  
* Conjunto de datos de prueba: scores\_valid.csv.  
* Hoja de cálculo o script externo con los resultados de validación de los puntajes de desempeño.

Este plan valida tanto la precisión de los cálculos de evaluación final como la funcionalidad de la infraestructura de informes. Superar esta auditoría significa que la aplicación está lista para la fase de desarrollo de contenido del informe final.